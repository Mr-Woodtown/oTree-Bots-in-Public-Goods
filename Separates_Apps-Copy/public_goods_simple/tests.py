from otree.api import Bot, expect\nfrom . import *\n\n\nclass PlayerBot(Bot):\n    cases = ['all_cooperate', 'leader_defects']\n\n    def play_round(self):\n        player = self.player\n\n        yield Welcome, dict(PlayerID=player.id_in_subsession)\n        yield Instructions\n        yield UnderstandingCheck\n\n        if self.case == 'all_cooperate':\n            contribution = 1\n        else:\n            contribution = 0 if player.id_in_group == 1 else 1\n\n        yield Contribute, dict(contribution=contribution)\n        yield ResultsWaitPage\n        yield Results\n\n        expected_payoff = C.ENDOWMENT - player.contribution + player.group.individual_share\n        expect(player.payoff, expected_payoff)\n\n        if player.round_number == C.NUM_ROUNDS:\n            total_payoff = sum(p.payoff for p in player.in_all_rounds())\n            expect(player.account, total_payoff)\n
